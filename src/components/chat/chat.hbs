<section class="chat">
    {{{
    DialogAddUsers
            onClose=onClose
            addUserToChat=addUserToChat
            ref="dialogAddUsers"
            onInput=findUsers
    }}}

    {{{
    DialogDeleteUsers
            onClose=onClose
            deleteUsersFromChat=deleteUsersFromChat
            ref="dialogDeleteUsers"
    }}}

    <header class="chat-header">
            {{{ ChatOptions handleAddMember=handleAddMember handleDeleteMember=handleDeleteMember }}}

        {{#if companion}}
            <div class="chat-header__details">
                <div class="chat-header__avatar">
                    <img
                            src={{ companion.avatar }}
                            alt="User Avatar"
                            width="34px"
                            height="34px"
                    >
                </div>
                <h3 class="chat-header__name">{{ companion.displayName }}</h3>
            </div>
        {{else}}
            <h3 class="chat-header__title">{{ activeChat.title }}</h3>
        {{/if}}

        {{{ OptionsIcon onClick=handleChatOptionsToggle }}}
    </header>


    <div class="chat-main">
        {{!-- <time class="chat-main__date" datetime="{{ this.time }}">{{ this.time }}</time>  --}}
        <div class="chat-main__messages">
            {{#each activeChat.messages}}
                <div class="chat-main__message {{#if isMine}} chat-main__message_mine {{/if}}">
                    <p>{{ this.content }}</p>
                    <div class="chat-main__message-details">
                        <time datetime="{{ this.time }}">{{ this.time }}</time>
                    </div>
                </div>
            {{/each}}
        </div>
        {{{ Anchor ref="anchorRef" }}}
    </div>


    <footer class="chat-footer">
        <button class="chat__button" type="button">
            {{> AttachIcon }}
        </button>

        {{{
        InputField
                type="text"
                name="message"
                onBlur=onBlur
                ref="message"
                env="chat"
                placeholder="Message"
                validate=validate.message
        }}}

           {{{
           Button
                   type="button"
                   env='chat'
                   onClick=handleSendClick
           }}}
    </footer>
</section>
